#!/bin/bash
set -euo pipefail

standardize() {
  prettyhtml --sortAttributes "$1"
  prettier \
    --html-whitespace-sensitivity ignore \
    --print-width 100 \
    --write \
    "$1"
}

rel_path="${1:7}" # string off "output/"
echo "$rel_path"
cp "$HOME/proj/tomdalling.com/master/$rel_path" old.html
cp "output/$rel_path" new.html
standardize old.html
standardize new.html
git diff --no-index old.html new.html || true
rm old.html new.html
